<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–ù–∞–≤–∏–≥–∞—Ç–æ—Ä –†–ñ–î–ö ‚Äî –£—Å—Å—É—Ä–∏–π—Å–∫</title>
<script src="https://api-maps.yandex.ru/2.1/?apikey=be0c8369-7476-47a3-a315-59ab429fadcb&lang=ru_RU"></script>
<style>
/* –°—Ç–∏–ª–∏ –∏–∑ –ø–µ—Ä–≤–æ–≥–æ —Ñ–∞–π–ª–∞ */
:root{--bg:#07070a;--accent:#00ffd0;--accent2:#6f56ff;--muted:#8aa0b1}
*{box-sizing:border-box}body{margin:0;height:100vh;font-family:Inter,Segoe UI,Arial;background:linear-gradient(180deg,#03040a,#071021);color:#e6f7f1;overflow:hidden}
.topbar{position:fixed;left:0;right:0;top:0;height:64px;display:flex;align-items:center;gap:16px;padding:10px 18px;z-index:1200;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);backdrop-filter:blur(6px);border-bottom:1px solid rgba(255,255,255,0.03)}
.brand-link{text-decoration:none;color:inherit;display:flex;align-items:center;gap:16px;}
.brand{display:flex;gap:12px;align-items:center}
.logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent2),var(--accent));box-shadow:0 0 18px rgba(0,255,208,.08);display:flex;align-items:center;justify-content:center;color:#021018;font-weight:700}
.title{font-weight:700;font-size:16px}
.subtitle{font-size:12px;color:var(--muted);margin-top:-4px}
.map-wrap{position:fixed;inset:64px 0 0 0}
#map{width:100%;height:100%}
.buildings-bar{position:fixed;left:50%;transform:translateX(-50%);bottom:22px;display:flex;gap:10px;padding:6px;border-radius:999px;z-index:1100}
.building-btn{background:linear-gradient(90deg,var(--accent2),var(--accent));padding:10px 14px;border-radius:999px;border:none;color:#051018;font-weight:700;cursor:pointer;box-shadow:0 0 18px rgba(111,86,255,.06)}
/* –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–æ–Ω–∞ –∏ —Ü–≤–µ—Ç–∞ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –Ω–∏–∂–Ω–µ–π –ø–∞–Ω–µ–ª–∏ (–¥–ª—è —á–µ—Ä–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞) */
.building-sheet{position:fixed;left:12px;right:12px;bottom:12px;background:rgba(255,255,255,0.95);
backdrop-filter:blur(8px);border-radius:14px;padding:14px;z-index:1150;max-width:980px;margin:auto;transform:translateY(120%);transition:transform .45s cubic-bezier(.2,.9,.2,1);box-shadow:0 10px 40px rgba(0,0,0,.6);color:#051018;
}
.building-sheet.show{transform:translateY(0)}
.sheet-row{display:flex;gap:12px;align-items:flex-start}
.sheet-left{flex:1}
.sheet-right{width:340px}
.sheet-title{font-weight:800;font-size:18px;margin-bottom:6px;color:#051018;}
.muted{color:#555;
font-size:13px}
.plan{height:220px;border-radius:8px;background:rgba(0,0,0,0.03);display:flex;align-items:center;justify-content:center;border:1px dashed rgba(0,0,0,0.1);overflow:hidden;position:relative}
.plan img{width:100%;height:100%;object-fit:contain;cursor:zoom-in;transition:transform .25s}
.controls{display:flex;gap:8px;margin-top:10px}
.btn{padding:10px 12px;border-radius:10px;border:none;cursor:pointer;background:linear-gradient(90deg,#111827,#0b1220);color:#e6f7f1;font-weight:700;border:1px solid rgba(255,255,255,0.03)}
.btn-accent{background:linear-gradient(90deg,var(--accent2),var(--accent));color:#051018;box-shadow:0 0 18px rgba(0,255,208,.06)}
.neon-edge::before{content:"";position:fixed;inset:0;pointer-events:none;border-radius:6px;z-index:1400;background:linear-gradient(90deg,rgba(111,86,255,.18),rgba(0,255,208,.12),rgba(255,105,180,.08));mask-image:linear-gradient(#000 0 0);opacity:.18}
/* responsive */
@media(max-width:900px){.sheet-row{flex-direction:column}.sheet-right{width:100%}.building-sheet{left:8px;right:8px}}
</style>
</head>
<body class="neon-edge">

<div class="topbar">
  <a href="https://rgdk.info/" target="_blank" class="brand-link">
    <div class="brand">
      <div class="logo">RZ</div>
      <div>
        <div class="title">–ù–∞–≤–∏–≥–∞—Ç–æ—Ä –†–ñ–î–ö ‚Äî –£—Å—Å—É—Ä–∏–π—Å–∫</div>
      </div>
    </div>
  </a>
</div>

<div class="map-wrap"><div id="map"></div></div>
<div class="buildings-bar" id="buildingsBar"></div>

<div class="building-sheet" id="buildingSheet" aria-hidden="true">
  <div class="sheet-row">
    <div class="sheet-left">
      <div class="sheet-title" id="sheetTitle">–ù–∞–∑–≤–∞–Ω–∏–µ</div>
      <div class="muted" id="sheetAddress">–ê–¥—Ä–µ—Å</div>
      <div style="height:10px"></div>
      <div class="plan" id="planBlock">–ü–ª–∞–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω</div>
      <div style="height:10px"></div>
      <div id="floorControls" style="display:flex;gap:8px;align-items:center">
        <div style="font-weight:800">–≠—Ç–∞–∂:</div>
        <div id="floorButtons"></div>
      </div>
      <div style="height:12px"></div>
      <div class="controls">
        <button class="btn" onclick="closeSheet()">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>
    <div class="sheet-right">
      <div style="font-weight:800">–ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ü—Ä–∏–º–µ—á–∞–Ω–∏—è</div>
      <div style="height:8px"></div>
      <div id="sheetNote" style="margin-top:6px; font-size: 14px;">‚Äî</div>
    </div>
  </div>
</div>

<script>
// –î–∞–Ω–Ω—ã–µ –∑–¥–∞–Ω–∏–π —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ —ç—Ç–∞–∂–∞–º–∏, –¥–µ—Ç–∞–ª—è–º–∏ –∏ –ø—Ä–µ—Ñ–∏–∫—Å–∞–º–∏ –¥–ª—è —Ñ–∞–π–ª–æ–≤
const buildingsData = [
    { 
        id:1, 
        name:"–ì–ª–∞–≤–Ω—ã–π —É—á–µ–±–Ω—ã–π –∫–æ—Ä–ø—É—Å", 
        address:"692527, –ü—Ä–∏–º–æ—Ä—Å–∫–∏–π –∫—Ä–∞–π, –≥. –£—Å—Å—É—Ä–∏–π—Å–∫, —É–ª. –ß–∏—á–µ—Ä–∏–Ω–∞ 146", 
        coords:[43.792946, 131.980634], 
        floors:3, 
        defaultFloor:1, 
        imagePrefix: 3, // –î–ª—è —Ñ–∞–π–ª–æ–≤ 3_1.jpg, 3_2.jpg, 3_3.jpg
        detailsHtml: `<div class="small">–¢–µ–ª./—Ñ–∞–∫—Å:</div>
            <div style="margin-top:2px; line-height: 1.4;">+7 (4234) 354738 ‚Äì –ø—Ä–∏—ë–º–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞<br>+7 (4234) 354663 ‚Äì –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è<br>+7 (4234) 354810 ‚Äì —É—á–µ–±–Ω–∞—è —á–∞—Å—Ç—å<br>+7 (4234) 354810 ‚Äì –ø—Ä–∏—ë–º–Ω–∞—è –∫–æ–º–∏—Å—Å–∏—è</div>
            <div class="small" style="margin-top:10px;">E-mail:</div>
            <div style="margin-top:2px;"><a href="mailto:upu16@yandex.ru" style="color: #0088cc;">upu16@yandex.ru</a></div>` 
    },
    { 
        id:2, 
        name:"–£—á–µ–±–Ω—ã–π –∫–æ—Ä–ø—É—Å (–ì–æ—Ä—å–∫–æ–≥–æ 15)", 
        address:"–ü—Ä–∏–º–æ—Ä—Å–∫–∏–π –∫—Ä–∞–π, –≥. –£—Å—Å—É—Ä–∏–π—Å–∫, —É–ª. –ì–æ—Ä—å–∫–æ–≥–æ 15", 
        coords:[43.790857, 131.944324], 
        floors:2, 
        defaultFloor:1, 
        imagePrefix: 1, // –î–ª—è —Ñ–∞–π–ª–æ–≤ 1_1.jpg, 1_2.jpg
        detailsHtml: `<div class="small">–¢–µ–ª.:</div>
            <div style="margin-top:2px;">8 (4234) 32-07-31</div>` 
    },
    { 
        id:3, 
        name:"–£—á–µ–±–Ω–æ-–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–∞—Å—Ç–µ—Ä—Å–∫–∏–µ", 
        address:"–ü—Ä–∏–º–æ—Ä—Å–∫–∏–π –∫—Ä–∞–π, –≥. –£—Å—Å—É—Ä–∏–π—Å–∫, —É–ª. –¢—É—Ä–≥–µ–Ω–µ–≤–∞ 15", 
        coords:[43.804885, 131.977373], 
        floors:2, 
        defaultFloor:1, 
        imagePrefix: 2, // –î–ª—è —Ñ–∞–π–ª–æ–≤ 2_1.jpg, 2_2.jpg
        detailsHtml: `<div class="small">–¢–µ–ª.:</div>
            <div style="margin-top:2px;">8 (4234) 38-10-86</div>` 
    },
    { 
        id:4, 
        name:"–û–±—â–µ–∂–∏—Ç–∏–µ", 
        address:"–ü—Ä–∏–º–æ—Ä—Å–∫–∏–π –∫—Ä–∞–π, –≥. –£—Å—Å—É—Ä–∏–π—Å–∫, —É–ª. –°—É—Ö–∞–Ω–æ–≤–∞ 66", 
        coords:[43.793303, 131.955428], 
        floors:1, 
        defaultFloor:1, 
        imagePrefix: 4, // –î–ª—è —Ñ–∞–π–ª–æ–≤ 4_1.jpg
        detailsHtml: `<div class="small">–¢–µ–ª.:</div>
            <div style="margin-top:2px;">8 (4234) 32-15-45</div>` 
    }
];

// IMAGES –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ –ø—É—Ç—å —Å—Ç—Ä–æ–∏—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤ showFloorImage, 
// –Ω–æ –æ—Å—Ç–∞–≤–ª—é –µ–≥–æ –ø—É—Å—Ç—ã–º –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏, –µ—Å–ª–∏ –æ–Ω –≥–¥–µ-—Ç–æ –µ—â–µ –º–æ–≥ –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω.
let IMAGES = { buildings: {} }; 

let map = null;
let placemarks = {};
let currentBuilding = null;
const DEFAULT_CENTER = [43.790882, 131.944252];

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã
function initMap(){
    const center = buildingsData[0] ? buildingsData[0].coords : DEFAULT_CENTER;
    map = new ymaps.Map('map', {
        center: center,
        zoom: 17,
        controls:['zoomControl','fullscreenControl']
    });
    renderBuildingsOnMap();
}

// –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∑–¥–∞–Ω–∏–π –Ω–∞ –∫–∞—Ä—Ç–µ –∏ –∫–Ω–æ–ø–æ–∫
function renderBuildingsOnMap(){
    map.geoObjects.removeAll();
    placemarks={};
    const bar = document.getElementById('buildingsBar');
    bar.innerHTML='';

    buildingsData.forEach(b=>{
        const pm = new ymaps.Placemark(b.coords,{
            balloonContentHeader:b.name,
            balloonContentBody:b.address
        },{
            preset:'islands#icon',
            iconColor:'#00ffd0'
        });
        pm.events.add('click',()=>openSheetFor(b.id));
        map.geoObjects.add(pm);
        placemarks[b.id]=pm;

        const btn = document.createElement('button');
        btn.className='building-btn';
        btn.textContent=b.name.replace(/\s\(.*\)/, ''); // –£–±–∏—Ä–∞–µ–º (–ì–æ—Ä—å–∫–æ–≥–æ 15) –¥–ª—è –∫–Ω–æ–ø–∫–∏
        btn.onclick=()=>{
            map.setCenter(b.coords,17);
            openSheetFor(b.id);
        };
        bar.appendChild(btn);
    });
}

// –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–∞–Ω–µ–ª–∏ —Å –¥–µ—Ç–∞–ª—è–º–∏
async function openSheetFor(id){
    const b = buildingsData.find(x=>x.id===id);
    if(!b) return;

    currentBuilding = b;
    document.getElementById('sheetTitle').textContent = b.name;
    document.getElementById('sheetAddress').textContent = b.address;
    
    // –í—Å—Ç–∞–≤–ª—è–µ–º –≤—Å–µ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–µ—Ç–∞–ª–∏
    document.getElementById('sheetNote').innerHTML = b.detailsHtml || '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.';

    // –ö–Ω–æ–ø–∫–∏ —ç—Ç–∞–∂–µ–π
    const floorControls = document.getElementById('floorControls');
    const floorButtons = document.getElementById('floorButtons');
    floorButtons.innerHTML='';
    
    const floorsCount = b.floors || 1;

    if (floorsCount > 1) {
        floorControls.style.display = 'flex'; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–ª–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —ç—Ç–∞–∂–∞–º–∏
        for(let i=1;i<=floorsCount;i++){
            const fbtn = document.createElement('button');
            // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å, —á—Ç–æ–±—ã –æ—Ç–ª–∏—á–∞—Ç—å –∫–Ω–æ–ø–∫–∏ —ç—Ç–∞–∂–µ–π –æ—Ç –¥—Ä—É–≥–∏—Ö –∫–Ω–æ–ø–æ–∫
            fbtn.className='btn floor-btn';
            fbtn.textContent='–≠—Ç–∞–∂ '+i;
            fbtn.onclick = ()=>{ 
                showFloorImage(b.id,i); 
                // –í—ã–¥–µ–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
                document.querySelectorAll('.floor-btn').forEach(btn => btn.classList.remove('btn-accent'));
                fbtn.classList.add('btn-accent');
            };
            floorButtons.appendChild(fbtn);
        }
        // –í—ã–¥–µ–ª—è–µ–º –∫–Ω–æ–ø–∫—É –ø–µ—Ä–≤–æ–≥–æ —ç—Ç–∞–∂–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        if (floorButtons.firstChild) {
            floorButtons.firstChild.classList.add('btn-accent');
        }
    } else {
        floorControls.style.display = 'none'; // –°–∫—Ä—ã–≤–∞–µ–º, –µ—Å–ª–∏ —Ç–æ–ª—å–∫–æ 1 —ç—Ç–∞–∂
    }

    // –ü–æ–∫–∞–∑–∞—Ç—å –ø–ª–∞–Ω –ø–µ—Ä–≤–æ–≥–æ —ç—Ç–∞–∂–∞ (–¥–ª—è –≤—Å–µ—Ö –∑–¥–∞–Ω–∏–π)
    showFloorImage(b.id, b.defaultFloor||1);

    const sheet = document.getElementById('buildingSheet');
    sheet.classList.add('show');
    sheet.setAttribute('aria-hidden','false');
}

// –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–∞–Ω–µ–ª–∏ —Å –¥–µ—Ç–∞–ª—è–º–∏
function closeSheet(){
    const sheet = document.getElementById('buildingSheet');
    sheet.classList.remove('show');
    sheet.setAttribute('aria-hidden','true');
    currentBuilding=null;
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —ç—Ç–∞–∂–∞ —Å —É—á–µ—Ç–æ–º –ø—Ä–µ—Ñ–∏–∫—Å–∞
async function showFloorImage(bid, floor){
    const b = buildingsData.find(x=>x.id===bid);
    if(!b) return;

    const planBlock = document.getElementById('planBlock');
    planBlock.innerHTML = '–ó–∞–≥—Ä—É–∂–∞—é...';
    
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º imagePrefix –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª—É
    const prefix = b.imagePrefix;
    const candidate = `images/${prefix}_${floor}.jpg`;
    
    try{
        const r = await fetch(candidate,{cache:'no-store'});
        if(r.ok){
            planBlock.innerHTML = `<img src="${candidate}" onclick="toggleZoom(this)">`;
            return;
        }
    }catch(e){}

    planBlock.innerHTML = 'üó∫Ô∏è –ü–ª–∞–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω';
}

// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
function toggleZoom(img){
    if(img.style.transform==='scale(1.2)'){
        img.style.transform='scale(1)';
        img.style.cursor='zoom-in';
    } else {
        img.style.transform='scale(1.2)';
        img.style.cursor='zoom-out';
    }
}

// –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞: –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ä—Ç—ã
window.addEventListener('load', async ()=>{
    ymaps.ready(()=>initMap());
});

</script>
</body>
</html>